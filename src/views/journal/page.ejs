<%- include('../partials/head', { title, additionalCss: ['journal'] }) %>
<%- include('../partials/nav', { activePage: 'journal' }) %>

<main class="journal-single-page">
  <div class="single-page-container">
    <!-- Image Section -->
    <div class="page-image-section">
      <img src="/<%= page.image_path %>" alt="<%= page.title %>" class="page-image">

      <div class="image-controls">
        <button id="zoomIn" class="btn btn-icon" title="Zoom +">
          <i class="fas fa-search-plus"></i>
        </button>
        <button id="zoomOut" class="btn btn-icon" title="Zoom -">
          <i class="fas fa-search-minus"></i>
        </button>
      </div>
    </div>

    <!-- Transcription Section -->
    <div class="page-transcription-section">
      <div class="transcription-header">
        <h1><%= page.title %></h1>
        <span class="badge badge-<%= page.status || 'draft' %>">
          <%= page.status === 'verified' ? 'Vérifié' : page.status === 'validated' ? 'Validé' : 'Brouillon' %>
        </span>
      </div>

      <% if (page.description) { %>
        <p class="page-description"><%= page.description %></p>
      <% } %>

      <div class="transcription-content">
        <%- page.content_html || '<p>Transcription non disponible</p>' %>
      </div>

      <% if (page.transcriptor_notes) { %>
        <div class="transcriptor-notes">
          <h4><i class="fas fa-sticky-note"></i> Notes du transcripteur</h4>
          <p><%= page.transcriptor_notes %></p>
        </div>
      <% } %>

      <div class="page-navigation">
        <% if (prevPage) { %>
          <a href="/journal/page/<%= prevPage %>" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i> Page précédente
          </a>
        <% } else { %>
          <span></span>
        <% } %>

        <a href="/journal" class="btn btn-secondary">
          <i class="fas fa-th"></i> Toutes les pages
        </a>

        <% if (nextPage) { %>
          <a href="/journal/page/<%= nextPage %>" class="btn btn-outline">
            Page suivante <i class="fas fa-arrow-right"></i>
          </a>
        <% } else { %>
          <span></span>
        <% } %>
      </div>
    </div>
  </div>
</main>

<%- include('../partials/footer', { additionalJs: ['journal'] }) %>
